@using Crufty
@model CruftyWeb.Models.HomeViewModel

<div class="jumbotron">
    <h1>Court Changes</h1>
</div>

<div class="container">
    @using (Html.BeginForm("AddNewSite", "Home", FormMethod.Post))
    {
        <div class="row">
            <div class="col-xs-6">
                <h4>Add New Site</h4>
            </div>
        </div>
        <div class="row">
            <div class="col-xs-2">
                <p>@Html.LabelFor(x => x.CourtKey) </p>
                <p>@Html.LabelFor(x => x.CourtName) </p>
                <p>@Html.LabelFor(x => x.Url) </p>
                <p>@Html.LabelFor(x => x.XPath)</p>
            </div>

            <div class="col-xs-2">
                <p>@Html.TextBoxFor(x => x.CourtKey)</p>
                <p>@Html.TextBoxFor(x => x.CourtName)</p>
                <p>@Html.TextBoxFor(x => x.Url)</p>
                <p>@Html.TextBoxFor(x => x.XPath)</p>
            </div>
        </div>
        <div class="row">
            <div class="col-xs-2">
                <input type="submit" id="Save" class="btn btn-primary" value="Add"/>
            </div>
        </div>
    }
    <br/>
    <br/>
    <hr/>

    @Html.Label("Display All Courts?")&nbsp;@Html.CheckBox("DisplayAll", Model.DisplayAll, new {@id = "DisplayAll"})

    @foreach (var court in Model.Websites)
    {
        <div class="row">
            <div class="col-lg-12">
                <h3>@Html.Raw(court.CourtName)</h3>
            </div>
        </div>
        <div class="row">
            <div class="col-xs-8">
                <h5>@Html.Raw(court.Url)</h5>
            </div>
        </div>
        <div class="row">
            <div class="col-xs-1">
                @Html.Label("XPath ")
            </div>
            <div class="col-xs-8">
                @Html.Raw(court.SelectionXPathString)
            </div>
        </div>
        <div class="row">
            <div class="col-xs-2">
                @Html.Label("Court Key")
            </div>
            <div class="col-xs-8">
                @Html.Raw(court.CourtKey)
            </div>
        </div>
        <div class="row">
            <div class="col-xs-1">
                @Html.Label("Last Run")
            </div>
            <div class="col-xs-2">
                @Html.Raw(court.LastRunDateTime)
            </div>
        </div>
        <div class="row">
            <div class="col-xs-1">
                @Html.Label("Last Change")
            </div>
            <div class="col-xs-2">
                @Html.Raw(court.LastChangedDateTime)
            </div>
        </div>

        <div class="row">
            <div class="col-xs-3">
                <h4>Checked? &nbsp;@Html.CheckBox("Checked", court.Checked)</h4>
            </div>
            <div class="col-lg-3">
                <input type="submit" id="Mark" class="btn btn-sm" value="Mark as Checked"/>
            </div>
        </div>
        <div class="row">
            <div class="col-xs-3">
                <h4><a href="~/SideBySideDiff?id=@court.Id">Side By Side Changes</a></h4>
            </div>
            <div class="col-xs-3">
                <h4><a href="~/ColoredDiff?id=@court.Id">Alternate View of Changes</a></h4>
            </div>
        </div>
        <hr/>
    }
</div>
<script type="text/javascript">
    $(document).ready(function() {
        $('#DisplayAll').change(function () {            
            if ($(this).prop('checked')) {                
                window.location.href = "/Home?displayAll=true";
            } else {
                window.location.href = '/Home';                
            }
        });
    });
</script>